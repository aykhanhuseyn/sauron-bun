function T(){let o="Browser";switch(!0){case"brave"in navigator:{o="Brave;";break}case"chrome"in navigator:{o="Chrome;";break}case"safari"in navigator:{o="Safari;";break}case"netscape"in window:{o="Firefox;";break}default:{o="Browser;";break}}return{appCodeName:navigator.appCodeName,appName:navigator.appName,appVersion:navigator.appVersion,browser:o,buildID:navigator.buildID,cookieEnabled:navigator.cookieEnabled,isStandalone:window.matchMedia("(display-mode: standalone)").matches,platform:navigator.platform,product:navigator.product,productSub:navigator.productSub,language:navigator.language,languages:navigator.languages,maxTouchPoints:navigator.maxTouchPoints,userAgent:navigator.userAgent,vendor:navigator.vendor}}async function V(){const o=await navigator?.gpu?.requestAdapter?.();return{gpu:{vendor:o?.vendor,architecture:o?.architecture},cpu:{hardwareConcurrency:navigator.hardwareConcurrency,platform:navigator.platform},ram:"deviceMemory"in navigator?navigator.deviceMemory:0,network:{downlink:navigator.connection?.downlink??0,effectiveType:navigator.connection?.effectiveType,rtt:navigator.connection?.rtt??0,saveData:navigator.connection?.saveData??!1}}}function D(){return{width:screen.width,height:screen.height,availWidth:screen.availWidth,availHeight:screen.availHeight,innerWidth:window.innerWidth,innerHeight:window.innerHeight,outerWidth:window.outerWidth,outerHeight:window.outerHeight,colorDepth:screen.colorDepth,pixelDepth:screen.pixelDepth,isExtended:screen.isExtended,orientationType:screen.orientation.type,orientationAngle:screen.orientation.angle,maxTouchPoints:navigator.maxTouchPoints,devicePixelRatio}}var P=function(){const o=new Date,a=new Date(o.getFullYear(),0,1,0,0,0,0);let t=a.toISOString();const n=new Date(t.substring(0,t.length-1)),i=(a.getTime()-n.getTime())/3600000,e=new Date(o.getFullYear(),6,1,0,0,0,0);t=e.toISOString();const l=new Date(t.substring(0,t.length-1)),r=(e.getTime()-l.getTime())/3600000;return i===r},y=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},L=function(){return(new Date()).getTimezoneOffset()};function O(){return`${P()}|${y()}|${L()}`}var s=(o,a=0)=>{let t=3735928559^a,n=1103547991^a;for(let i=0,e=0;i<o.length;i++)e=o.charCodeAt(i),t=Math.imul(t^e,2654435761),n=Math.imul(n^e,1597334677);return t=Math.imul(t^t>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507)^Math.imul(t^t>>>13,3266489909),4294967296*(2097151&n)+(t>>>0)};var S=(()=>{let o,a,t,n=0,i="",e;function l(c,f=!1){e=c;try{r(),a.connect(t),t.connect(o.destination),a.start(0),o.startRendering(),o.oncomplete=W}catch(m){if(f)throw m}}function r(){x(),n=o.currentTime,d(),w()}function x(){o=new("webkitOfflineAudioContext"in window?window.webkitOfflineAudioContext:window.OfflineAudioContext)(1,44100,44100)}function d(){a=o.createOscillator(),a.type="triangle",a.frequency.setValueAtTime(1e4,n)}function w(){t=o.createDynamicsCompressor(),u("threshold",-50),u("knee",40),u("ratio",12),u("reduction",-20),u("attack",0),u("release",0.25)}function u(c,f){if(typeof t[c]?.setValueAtTime==="function")t[c].setValueAtTime(f,o.currentTime)}function W(c){M(c),t.disconnect()}function M(c){let f=0;for(let m=4500;5000>m;m++){const N=c.renderedBuffer.getChannelData(0)[m];f+=Math.abs(N)}if(i=f.toString(),typeof e==="function")return e(i)}return{run:l}})();var q=()=>{return!!document.createElement("canvas").getContext?.("2d")},p=()=>{if(!q())return"fingerprint";const o=document.createElement("canvas"),a=o.getContext("2d"),t="BrowserLeaks,com <canvas> 1.0";return a.textBaseline="top",a.font="14px 'Arial'",a.textBaseline="alphabetic",a.fillStyle="#f60",a.fillRect(125,1,62,20),a.fillStyle="#069",a.fillText(t,2,15),a.fillStyle="rgba(102, 204, 0, 0.7)",a.fillText(t,4,17),o.toDataURL()};var E=()=>{const o=new Promise((t)=>{S.run((n)=>t(n))});return new Promise((t,n)=>o.then(async(i)=>{let e=navigator.userAgent;const l=p();e+=`${l};`;const r=O();e+=`${r};`;const x=T();e+=`${JSON.stringify(x)};`;const d=D(),w=`${d.width}${d.height}${d.isExtended}${d.maxTouchPoints}${d.pixelDepth}${d.colorDepth}`;e+=`${w};`;const u=await V();e+=`${JSON.stringify(u)};`,console.log({fingerprint:e,timeZoneFingerprint:r,audioFingerprint:i,canvasFingerprint:l,cyrb53:s(e,0)}),t(s(e,0))}).catch(()=>{try{t(s(p()).toString())}catch(i){n("Failed to generate the finger print of this browser")}}))};function C(){try{const o=localStorage.getItem("buckets");return JSON.parse(o??"[]")}catch(o){return[]}}function B(o){const a={},t=Array.from(o.attributes);for(let n of t)a[n.nodeName]=n.nodeValue;return a}function v(o){localStorage.setItem("buckets",JSON.stringify(o))}var J=document.currentScript?.src,g=new URL(J),H=g.searchParams.get("pi"),G=g.origin,A="";E().then((o)=>{A=o});if(!H)throw new Error("Sauron Project ID not provided!");var R=setInterval(()=>{const o=C(),a=o.filter((n)=>!n.sent);v(a);const t=a.map((n)=>fetch(`${G}/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((i)=>{if(i.status===200){n.sent=!0;return}if(i.status===401)throw clearInterval(R),new Error("Unauthorized")}).catch((i)=>{throw clearInterval(R),new Error(i)}));Promise.allSettled(t).then((n)=>{console.log({buckets:o,promises:t,response:n}),v(o)})},30000);document.addEventListener("click",(o)=>{const a=o.target;if(!a||a.getAttribute("data-sauron-id")===null)return;const t=B(a),n=C(),i=n.slice();let e=n.findIndex((r)=>r.identifier===t["data-sauron-id"]);e=e===-1?n.length:e;const l=`${A}-${Math.random().toString(36).substring(7)}-${Date.now()}`;i.push({coordinates:{x:o.clientX,y:o.clientY},dimensions:{h:a.clientHeight,w:a.clientWidth},createdAt:new Date,eventType:"click",updatedAt:new Date,meta:t,fingerprint:A,application:H,identifier:l,sent:!1}),localStorage.setItem("buckets",JSON.stringify(i))});document.addEventListener("error",()=>{});document.addEventListener("resize",()=>{});document.addEventListener("keypress",()=>{});document.addEventListener("mousemove",()=>{});document.addEventListener("DOMContentLoaded",()=>{});document.addEventListener("touchstart",()=>{});document.addEventListener("touchmove",()=>{});document.addEventListener("touchend",()=>{});
